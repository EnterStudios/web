<div class="insert-location-container container content-width" ng-controller="InsertLocationCtrl as ilc">
    <div class="row">
        <div class="col-xs-12">

            <h3 class="uppercase">Neue Location erstellen</h3>

            <div class="image-upload-modal" ng-show="ilc.showImageUploadModal">
                <img src="{{ilc.imagePath.result}}" id="cropping-preview" alt="" class="image-modal"/>

                <div class="big-progress" ng-style="{'height': ilc.progressPercentage + '%'}"><span>{{ilc.progressPercentage}} %</span>
                </div>

                <div class="controls" ng-show="!ilc.isUploading">
                    <div class="btns">
                        <div class="locator-btn save-btn" ng-click="ilc.uploadImage()">hochladen</div>
                        <div class="locator-btn cancel-btn" ng-click="ilc.clearFileSelection()">abbrechen</div>
                    </div>
                </div>
            </div>

            <div id="trip-image" class="trip-image">
                <img class="img-responsive placeholder-imaeg" src="images/header-image-placeholder.png">

                <div class="image-too-large" ng-if="ilc.showImageTooLargeModal"
                     ng-include="'templates/modal/imageTooLarge.html'"></div>


                <a class="choose-image" ng-click="ilc.showImageChooser()">
                    <img class="img-responsive" src="images/icons/camera.png">
                </a>
                <input id="image-upload" type="file" accept="image/*"
                       onchange="angular.element(this).scope().ilc.selectImage(this)"
                       style="display: none">

                <div class="header-image">
                    <img ng-hide="!ilc.headerImagePath" class="img-responsive" ng-src="{{ilc.headerImagePath}}">
                </div>
            </div>
        </div>
    </div>


    <div class="row content">
        <div class="col-sm-6">
            <div class="google-maps-location relative">
                <div ng-class="{'loading': ilc.gpsLoading}" class="spinner"></div>
                <ui-gmap-google-map center='ilc.map.center' zoom='ilc.map.zoom'
                                    events="ilc.map.events">
                    <ui-gmap-marker coords="ilc.map.clickedMarker" idKey="ilc.map.clickedMarker.id"
                                    options="ilc.map.clickedMarker.options">
                    </ui-gmap-marker>
                </ui-gmap-google-map>
            </div>

            <div class="input-content">
                <div class="content-bottom">
                    <div class="search-wrapper">
                        <input class="location-city text-fields" type="text"
                               placeholder="Suche einen Ort"
                               ng-map-autocomplete options="ilc.googlePlacesOptions" ng-model="ilc.googlePlacesInput"
                               details="ilc.selectedPlaceDetails" name="locationCity"
                               required>
                        <a aria-label="Mein Standort" class="tt tt-small pointer tagme-button" ng-click="ilc.getMyLocation()"><img
                            class="img-responsive-height" src="images/icons/flag_klein_360.png"></a>
                    </div>
                </div>
            </div>


        </div>

        <div class="col-sm-6">
            <div class="input-content">
                <div class="content-bottom">
                    <form novalidate name="ilc.form" id="insertLocationForm">

                        <label class="uppercase">Location Titel</label>
                        <input
                            ng-class="{'error' : (ilc.form.locationTitle.$touched) && ilc.form.locationTitle.$error.required}"
                            class="text-fields" type="text" placeholder="Wie heißt deine Location?"
                            ng-model="ilc.locationFormDetails.title" name="locationTitle"
                            required>

                        <label class="uppercase">Tags</label>
                        <input
                            ng-class="{'error' : (ilc.form.locationTag.$touched) && ilc.form.locationTag.$error.required}"
                            class="text-fields" type="text" placeholder="Aussagekrägtige Tags mit Space getrennt"
                            ng-model="ilc.locationFormDetails.tags"
                            name="locationTag"
                            required>

                        <label class="uppercase">Beschreibung</label>
                        <textarea
                            ng-class="{'error' : (ilc.form.locationDescription.$touched) && ilc.form.locationDescription.$error.required}"
                            class="location-description text-fields" placeholder="Beschreibe deine Location"
                            ng-model="ilc.locationFormDetails.description" name="locationDescription"
                            required></textarea>


                        <div class="save pointer">
                            <input
                                class=" red button uppercase" type="submit"
                                ng-disabled="ilc.form.$invalid || !ilc.mapMarkerSet"
                                ng-click="ilc.save()" value="Location erstellen"/>
                        </div>

                    </form>

                </div>
            </div>
        </div>

    </div>
</div>

