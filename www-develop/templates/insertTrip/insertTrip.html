<div class="insert-trip-container" ng-controller="InsertTripCtrl as itc">

    <div id="trip-image" class="trip-image header-image-container">
        <a ng-if="itc.showAddLocationsBtn" ng-click="itc.scrollTo('availableLocations')" class="choose-image welcome_button">Locations hinzufügen!</a>
        <div class="header-image" ng-style="{'background-image': 'url(' + itc.backgroundImage + ')' }"></div>
    </div>
    <form novalidate name="itc.form">
        <div class="input-content">
            <div class="content-header">
                <div class="profile-image">
                    <img ng-src="{{itc.me.picture.picture}}">
                </div>
                <div class="moods">
                    <div class="feeling-text">
                        <p>Wie fühlt sich dein Trip an?</p>
                    </div>
                    <div class="selected-moods" ng-repeat="mood in itc.selectedMoods">
                        <div class="mood-images tt tt-small" aria-label="{{mood.title}}">
                            <img class="mood-image" ng-src="../images/icons/{{mood.icon}}">
                        </div>
                        <img class="cross-image" src="../images/icons/cross_button_moods.png" ng-click="itc.removeSelectedMood(mood)">
                    </div>
                    <div class="add-mood">
                        <ul class="mood-menu">
                            <li class="menu-item">
                                <a>
                                    <img class="plus-image" src="../images/icons/plus.png">
                                </a>
                                <ul>
                                    <li class="selectable-moods" ng-repeat="mood in itc.selectableMoods" ng-click="itc.selectMood(mood)">
                                        <a>{{mood.title}}</a>
                                        <img class="select-mood-image" ng-src="../images/icons/{{mood.icon}}">
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="content-bottom">
                <div class="left-section" set-class-when-at-top="fix-to-top">
                    <input type="hidden" ng-model="itc.startDateReal" required />
                    <input type="hidden" ng-model="itc.endDateReal" required />
                    <datepicker start-date-real="itc.startDateReal" end-date-real="itc.endDateReal"></datepicker>
                    <div class="days-amount">
                        <p class="text">anzahl tage</p>
                        <div class="insert-trip-circle" ng-click="itc.days=1" ng-class="{'insert-trip-circle-selected': itc.days == 1}">1</div>
                        <div class="insert-trip-circle" ng-click="itc.days=2" ng-class="{'insert-trip-circle-selected': itc.days == 2}">2</div>
                        <div class="insert-trip-circle" ng-click="itc.days=3" ng-class="{'insert-trip-circle-selected': itc.days == 3}">3</div>
                        <div class="insert-trip-circle" ng-click="itc.days=4" ng-class="{'insert-trip-circle-selected': itc.days == 4}">3+</div>
                    </div>
                    <div class="persons-amount">
                        <p class="text">anzahl personen</p>
                        <div class="insert-trip-circle" ng-click="itc.persons=1" ng-class="{'insert-trip-circle-selected': itc.persons == 1}">1</div>
                        <div class="insert-trip-circle" ng-click="itc.persons=2" ng-class="{'insert-trip-circle-selected': itc.persons == 2}">2</div>
                        <div class="insert-trip-circle" ng-click="itc.persons=3" ng-class="{'insert-trip-circle-selected': itc.persons == 3}">3</div>
                        <div class="insert-trip-circle" ng-click="itc.persons=4" ng-class="{'insert-trip-circle-selected': itc.persons == 4}">4</div>
                        <div class="insert-trip-circle" ng-click="itc.persons=5" ng-class="{'insert-trip-circle-selected': itc.persons == 5}">4+</div>
                    </div>
                </div>
                <div class="right-section">
                    <div class="validation-error" ng-show="(itc.form.tripTitle.$dirty) && itc.form.tripTitle.$error.required">
                        Bitte gebe einen Titel für deinen Trip ein.
                    </div>
                    <input class="text-fields" type="text" name="tripTitle" placeholder="Benenne deinen Trip" ng-model="itc.tripTitle" ng-model-options="{ updateOn: 'blur'}" required>
                    <div class="validation-error" ng-show="(itc.form.tripCity.$dirty) && itc.form.tripCity.$error.required">
                        Wo findet dein Trip statt?
                    </div>
                    <input class="text-fields" name="tripCity" type="text" placeholder="Wo no?" ng-map-autocomplete options="itc.googlePlacesOptions" ng-model="itc.tripCity" ng-model-options="{ updateOn: 'blur'}" details="itc.selectedPlaceDetails" required>

                    <a name="availableLocations"></a>
                    <p ng-click="itc.showAvailableLocations = !itc.showAvailableLocations">available locations</p>
                    <div class="locations" ng-class="{active: itc.showAvailableLocations }" ng-show="itc.availableLocations.length">
                        <div class="location" ng-repeat="(locationId, loc) in itc.availableLocationsHash">
                            <div class="img-container"><img ng-src="{{loc.images.thumbnail}}" alt="" class="location-img"/></div>
                            <div class="add-location">
                                <a href="" ng-click="itc.addLocationToTrip(locationId)">+</a>
                            </div>
                            <div class="moods">moods</div>
                            <div class="details">
                                <h3>{{loc.title}}</h3>
                                <p>{{loc.description}}</p>
                            </div>
                        </div>
                    </div>
                    <p ng-click="itc.showSelectedLocations = !itc.showSelectedLocations">selected locations</p>
                    <div class="locations" ng-class="{active: itc.showSelectedLocations }">
                        <div class="location" ng-repeat="(locationId, loc) in itc.selectedLocations">
                            <div class="img-container"><img ng-src="{{loc.images.thumbnail}}" alt="" class="location-img"/></div>
                            <div class="add-location">
                                <a href="" ng-click="itc.removeLocationFromTrip(locationId)">-</a>
                            </div>
                            <div class="moods">moods</div>
                            <div class="details">
                                <h3>{{loc.title}}</h3>
                                <p>{{loc.description}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="no-locations-available" ng-show="!itc.availableLocations.length">
                        <p>Füg' du erstmal Locations hinzu! Vorher machst du hier gar nichts!</p>
                        <a ui-sref="insertLocation">Location hinzufügen</a>
                    </div>
                    <textarea class="trip-description text-fields" placeholder="Beschreibe deinen Trip" ng-model="itc.tripDescription" ng-model-options="{ updateOn: 'blur'}" required></textarea>
                    <textarea class="trip-money text-fields" type="text" placeholder="Für was braucht dein Gast eventuell Geld?" ng-model="itc.tripDescriptionMoney" ng-model-options="{ updateOn: 'blur'}"></textarea>
                    <div class="accommodation">
                        <span>Übernachtung</span>
                        <div class="circle" ng-click="itc.toggleAccommodation()" ng-class="{'circle-selected': itc.accommodation == true}"></div>
                    </div>
                    <div class="accommodation-equipment" ng-show="itc.accommodation == true">
                        <acc-equ-chooser accommodation-equipment-selectable="itc.accommodationEquipmentSelectable" accommodation-equipment="itc.accommodationEquipment"></acc-equ-chooser >
                    </div>
                    <div class="save-trip">
                        <input type="submit" ng-disabled="itc.form.$invalid || !itc.locationHasBeenSelected" ng-click="itc.saveTrip()" value="SPEICHERN" />
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

